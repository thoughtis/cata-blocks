!function(){function e(){const e=document.createElement("summary");return e.textContent="Table of Contents",e}function t(e){const t=document.createElement("ul");return t.append(...e),t}function n(e){return t=>{const n=document.createElement("li"),o=function(e,t){return u(e)?new RegExp(e,"mi").exec(t):""}(e,t.textContent);return o&&(t.textContent=t.textContent.replace(o,""),n.append(document.createTextNode(o))),n.prepend(t),n}}function o(e){const t=document.createElement("a");return t.href="#"+e.id,t.textContent=e.textContent,t}function r(e){return u(e.id)&&u(e.textContent)}function c(e){return{...e,textContent:e.heading.hasChildNodes?(t=e.heading,d(t.childNodes).flat().join(" ").replace(/\s+/g," ")):""};var t}function a(e){return{...e,id:(n=e.heading.id,o=e.textContent,u(n)?n:(t=o,t.toLowerCase().replace(/[^a-z0-9\-]/g,"-").replace(/-+/g,"-").replace(/-$/,"").substring(0,64)))};var t,n,o}function d(e){return[...e].map((e=>e.hasChildNodes()?d(e.childNodes):e.textContent))}function u(e){return"string"==typeof e&&0<e.length}document.querySelectorAll(".wp-block-cata-toc").forEach((function(d){var i,l;const p=(s=function(e){return null===e?null:e.closest(".wp-site-blocks,.entry__content")}(d),null===s?[]:[...s.querySelectorAll("h2")]);var s;if(0===p.length)return d.parentNode.removeChild(d);const m=null!==(i=d.dataset)&&void 0!==i&&i.regexPattern?d.dataset.regexPattern:"",f=null!==(l=d.dataset)&&void 0!==l&&l.regexAppend?d.dataset.regexAppend:"",h=p.map((e=>({heading:e}))).map(c).map(function(e){return u(e)?t=>{const n=new RegExp(e,"mi").exec(t.textContent);return Array.isArray(n)?{...t,textContent:n.pop()}:t}:e=>e}(m)).map(a).filter(r);if(0===h.length)return;h.forEach((e=>{u(e.heading.id)||(e.heading.id=e.id)}));!function(t,n){const o=t.firstElementChild;null!==o?o.append(n):t.append(function(e){const t=document.createElement("details");return t.setAttribute("open","open"),t.append(...e),t}([e(),n]))}(d,function(e){const t=document.createElement("nav");return t.append(...e),t}([t(h.map(o).map(n(f)))]))})),document.addEventListener("tocBlocksRendered",(function(){console.log("rendered")})),document.dispatchEvent(new CustomEvent("tocBlocksRendered"))}();