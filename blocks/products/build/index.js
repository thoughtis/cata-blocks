!function(){"use strict";var e,t={487:function(e,t,n){var a={};n.r(a);var r=window.wp.blocks,l=window.wp.apiFetch,c=n.n(l);const o={};var i=window.wp.element,u=window.wp.i18n,s=window.wp.blockEditor,p=window.wp.components,d=window.wp.primitives,m=(0,i.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(d.Path,{fillRule:"evenodd",d:"M19.75 11H21V8.667L19.875 4H4.125L3 8.667V11h1.25v8.75h15.5V11zm-1.5 0H5.75v7.25H10V13h4v5.25h4.25V11zm-5.5-5.5h2.067l.486 3.24.028.76H12.75v-4zm-3.567 0h2.067v4H8.669l.028-.76.486-3.24zm7.615 3.1l-.464-3.1h2.36l.806 3.345V9.5h-2.668l-.034-.9zM7.666 5.5h-2.36L4.5 8.845V9.5h2.668l.034-.9.464-3.1z",clipRule:"evenodd"})),h=window.wp.data;function g(e){let{authors:t,brands:n}=e;return(0,i.createElement)("div",{className:"wp-block-cata-product__byline"},t.length>0&&(0,u.__)("by ","cata")+t.map((e=>e.display_name)).join(", "),!t.length>0&&n.length>0&&(0,u.__)("from ","cata")+n.map((e=>e.name)).join(", "))}function y(e){let{onSale:t,price:n,regularPrice:a,salePrice:r}=e;const l=t&&a&&r,c=n&&a&&!t&&n!==a;return(0,i.createElement)("div",{className:"wp-block-cata-product__price"},l&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)("del",null,(0,i.createElement)("span",null,(0,i.createElement)("span",null,"$"),a))," ",(0,i.createElement)("ins",null,(0,i.createElement)("span",null,(0,i.createElement)("span",null,"$"),r))),c&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)("span",null,(0,i.createElement)("span",null,"$"),n)," - ",(0,i.createElement)("span",null,(0,i.createElement)("span",null,"$"),a)),a&&!l&&!c&&(0,i.createElement)("span",null,(0,i.createElement)("span",null,"$"),a))}function f(e){let{product:t,display:n}=e;const{byline:a,price:r}=n;return(0,i.createElement)("article",{className:"wp-block-cata-product"},(0,i.createElement)("div",{className:"wp-block-cata-product__layout"},(0,i.createElement)("figure",{className:"wp-block-cata-product__image"},(0,i.createElement)("img",{loading:"lazy",src:t.images[0].src,alt:t.images[0].alt,sizes:"(max-width: 576px) 92.5vw, 576px",srcSet:t.images[0].src+"?resize=384,384 384w, "+t.images[0].src+"?resize=768,768 768w, "+t.images[0].src+"?resize=1152,1152 1152w",width:"384",height:"384"})),(0,i.createElement)("h3",{className:"wp-block-cata-product__title"},(0,i.createElement)("a",{className:"wp-block-cata-product__link",href:t.permalink},t.name)),a&&(0,i.createElement)(g,{authors:t.cap_guest_authors,brands:t.brands}),r&&(0,i.createElement)(y,{onSale:t.on_sale,price:t.price,regularPrice:t.regular_price,salePrice:t.sale_price})))}function b(e){let{products:t,display_byline:n,display_price:a}=e;return 0===t.length?(0,i.createElement)("p",null,"No products, update the options to try again."):(0,i.createElement)("div",{className:"wp-block-cata-products__layout"},t.map((e=>(0,i.createElement)(f,{key:`cata-product-${e.id}`,product:e,display:{byline:n,price:a}}))))}c().use((function(e,t){var n,a;return!0!==(null==e||null===(n=e.cata)||void 0===n?void 0:n.useProxy)?t(e):t({...e,path:(a=e.path,`/cata/v1/proxy/?url=${encodeURIComponent(a)}`)})})),c().use((function(e,t){var n,a;return console.log(null==e?void 0:e.catha,null==e||null===(n=e.cata)||void 0===n?void 0:n.useCache),!0!==(null==e||null===(a=e.cata)||void 0===a?void 0:a.useCache)?t(e):e.path in o?new Promise((t=>{t(o[e.path])})):(o[e.path]=t(e),o[e.path])})),(0,r.registerBlockType)("cata/products",{edit:function(e){let{attributes:t,setAttributes:n}=e;const{shopCatalogApiUrlBase:r,category:l,tag:o,per_page:u,orderby:d,order:g,query_url:y}=t,[f,v]=(0,i.useState)([]),w=(0,h.useDispatch)("core/notices");function E(e){w.createErrorNotice(e.message,{isDismissible:!0})}return(0,i.useEffect)((function(){const e=Object.fromEntries(Object.entries({category:l,tag:o}).filter((e=>{let[t,n]=e;return 0<n.length})));n({query_url:r+"?"+new URLSearchParams({...e,per_page:u,orderby:d,order:g,status:"publish"}).toString()})}),[l,o,u]),(0,i.useEffect)((function(){""!==y&&c()({path:y,cata:{useProxy:!0,useCache:!0}}).then(v).catch(E)}),[y]),(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",(0,s.useBlockProps)(),(0,i.createElement)(b,{products:f,display_byline:t.display_byline,display_price:t.display_price})),(0,i.createElement)(s.InspectorControls,null,(0,i.createElement)(p.PanelBody,{title:"Product Selection",icon:m,initialOpen:!1},(0,i.createElement)(p.TextControl,{label:"Product Category Id",onChange:e=>n({category:e}),type:"text",value:l,help:"A product category id can be found in the URL of the Shop Catalog category edit page. Like this -> (...&tag_ID=XXXX...)."}),(0,i.createElement)(p.TextControl,{label:"Product Tag Id",onChange:e=>n({tag:e}),type:"text",value:o,help:"A product tag id can be found in the URL of the Shop Catalog tag edit page. Like this -> (...&tag_ID=XXXX...)."}),(0,i.createElement)(p.TextControl,{label:"Number of Products",onChange:e=>n({per_page:e}),type:"number",value:u})),(0,i.createElement)(p.PanelBody,{title:"Product Block Options",icon:a.generic,initialOpen:!1},(0,i.createElement)(p.ToggleControl,{label:"Display product byline",help:t.display_byline?"Product byline shown.":"No product byline.",checked:t.display_byline,onChange:e=>{n({display_byline:e})}}),(0,i.createElement)(p.ToggleControl,{label:"Display product price",help:t.display_price?"Product price shown.":"No product price.",checked:t.display_price,onChange:e=>{n({display_price:e})}}))))},save:function(){return(0,i.createElement)("div",s.useBlockProps.save())}}),(0,r.registerBlockStyle)("cata/products",{name:"reel",label:"Reel"})}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,a),l.exports}a.m=t,e=[],a.O=function(t,n,r,l){if(!n){var c=1/0;for(s=0;s<e.length;s++){n=e[s][0],r=e[s][1],l=e[s][2];for(var o=!0,i=0;i<n.length;i++)(!1&l||c>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(o=!1,l<c&&(c=l));if(o){e.splice(s--,1);var u=r();void 0!==u&&(t=u)}}return t}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[n,r,l]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={826:0,431:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,l,c=n[0],o=n[1],i=n[2],u=0;if(c.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(i)var s=i(a)}for(t&&t(n);u<c.length;u++)l=c[u],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(s)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var r=a.O(void 0,[431],(function(){return a(487)}));r=a.O(r)}();