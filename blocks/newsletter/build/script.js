!function(){"use strict";class t{constructor(t){this.form=t,this.email=this.form.querySelector('input[type="email"]'),this.button=this.form.querySelector('button[type="submit"]'),this.output=this.form.querySelector('[role="alert"]'),this.action=this.updateActionforJSONP(this.form.action),this.isSending=!1,this.onError=this.onError.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onSuccess=this.onSuccess.bind(this),this.setCallbackFunction=this.setCallbackFunction.bind(this),this.send=this.send.bind(this),this.setSending=this.setSending.bind(this),this.successMsg=this.form.dataset.mailchimpSuccessMessage,this.MESSAGES={DEFAULT:"",ERROR:"We're sorry, an error occurred.",EXISTING_SUBSCRIBER:"You're already subscribed!",INVALID:"Please enter a valid email.",SENDING:"Sending...",SUCCESS:this.successMsg},this.form.addEventListener("submit",this.onSubmit)}onSubmit(t){t.preventDefault(),this.isSending||(this.setSending(!0),this.setCallbackFunction(),this.send(this.action+"&EMAIL="+encodeURIComponent(this.email.value)))}updateActionforJSONP(t){return t.replace("post?","post-json?")+"&c=mailchimpSuccess"}send(t){const s=document.createElement("script"),e=document.getElementsByTagName("script")[0];s.src=t,s.addEventListener("error",this.onError.bind(this)),e.parentNode.insertBefore(s,e)}setSending(t){this.isSending=t,this.isSending?(this.button.disabled=!0,this.output.textContent=this.MESSAGES.SENDING):this.button.disabled=!1}onSuccess(t){this.setSending(!1),this.email.value="",this.isSuccessResponse(t)?this.output.textContent=this.MESSAGES.SUCCESS:this.isErrorResponse(t)?this.output.textContent=this.formatErrorMessage(t):this.output.textContent=this.MESSAGES.ERROR}isSuccessResponse(t){return"object"==typeof t&&"result"in t&&"success"===t.result}isErrorResponse(t){return"object"==typeof t&&"result"in t&&"error"===t.result}formatErrorMessage(t){return"object"==typeof t&&"msg"in t?-1!==t.msg.indexOf("already subscribed")?this.MESSAGES.EXISTING_SUBSCRIBER:-1!==t.msg.indexOf("is invalid")?this.MESSAGES.INVALID:this.MESSAGES.ERROR:this.MESSAGES.ERROR}onError(){this.setSending(!1),this.output.textContent=this.MESSAGES.ERROR,this.email.value=""}setCallbackFunction(){window.mailchimpSuccess=this.onSuccess.bind(this)}}function s(s){"function"==typeof s.checkValidity&&new t(s)}!function(){const t=document.querySelectorAll("form[data-mailchimp]");Array.from(t).forEach(s)}()}();