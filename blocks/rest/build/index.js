!function(){"use strict";var e,t={315:function(e,t,n){var l=window.wp.blocks,r=window.wp.element,a=window.wp.i18n,i=window.wp.blockEditor,c=window.wp.components,o=window.wp.apiFetch,s=n.n(o);function m(e){let{text:t}=e;const n=document.createRange().createContextualFragment(t).firstChild.textContent;return(0,r.createElement)(r.Fragment,null,n)}function u(e){let{post:t}=e;return(0,r.createElement)("p",null,(0,r.createElement)("a",{href:t.link},(0,r.createElement)(m,{text:t.title.rendered})))}function d(e,t){const n=new URL(e);return n.searchParams.set("resize",t.join(",")),`${n.href.toString()} ${t[0]}w`}function p(e){let{data:t,sizes:n,dimensions:l,className:a}=e;if(!("source_url"in t))return null;const i=new URL(t.source_url);i.searchParams.set("resize",l[0].join(","));const c=l.map(d.bind(null,t.source_url));return(0,r.createElement)("img",{width:l[0][0],height:l[0][1],src:i.href.toString(),sizes:n,srcSet:c.join(","),className:a,loading:"lazy"})}function E(e,t){return t<=e}function _(e,t){return[t,Math.round(t/e)]}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null===e)return[];const{width:l,height:r}=e.media_details,a=null===t?l/r:t,i=(0===n.length?[l]:n).filter(E.bind(null,l));return i.map(_.bind(null,a))}function w(e){if(!("_embedded"in e)||!("wp:featuredmedia"in e._embedded))return null;if(!Array.isArray(e._embedded["wp:featuredmedia"])||0===e._embedded["wp:featuredmedia"].length)return null;const t=e._embedded["wp:featuredmedia"].filter((e=>"media_type"in e&&"image"===e.media_type));return 0===t.length?null:t.shift()}const v=["uncategorized","collective-world","project-oasis"];function h(e){if(!("_embedded"in e)||!("wp:term"in e._embedded))return null;if(!Array.isArray(e._embedded["wp:term"])||0===e._embedded["wp:term"].length)return null;const t=e._embedded["wp:term"].filter(g);if(0===t.length)return null;const n=t[0].filter((e=>!v.includes(e.slug)));return 0===n.length?null:Object.assign({},n[0])}function g(e){return Array.isArray(e)&&0<e.length&&"taxonomy"in e[0]&&"category"===e[0].taxonomy}function k(e){if(!("_embedded"in e)||!("wp:term"in e._embedded))return null;if(!Array.isArray(e._embedded["wp:term"])||0===e._embedded["wp:term"].length)return null;const t=e._embedded["wp:term"].filter(y);return 0===t.length?null:Object.assign({},t[0][0].profile)}function y(e){return Array.isArray(e)&&0<e.length&&"taxonomy"in e[0]&&"author"===e[0].taxonomy}function b(e){let{author:t}=e;const n=0<t.media.length?t.media[0]:null,l=f(n,1,[320,160,80]);return(0,r.createElement)("p",{className:"preview__byline"},null!==n&&(0,r.createElement)(p,{data:n,sizes:"6em",dimensions:l,className:"preview__avatar"}),(0,r.createElement)("a",{rel:"author",href:t.link},(0,r.createElement)("em",null,(0,r.createElement)(m,{text:t.display_name}))))}function N(e){let{post:t}=e;const n=w(t),l=f(n,1.5,[2560,1920,1280,960,640,480,320]),a=h(t),i=k(t);return(0,r.createElement)("article",{className:"preview is-layout-trending"},null!==n&&(0,r.createElement)("figure",{className:"preview__image-container"},(0,r.createElement)("a",{rel:"bookmark",href:t.link},(0,r.createElement)(p,{data:n,dimensions:l,sizes:"(max-width: 15em) 92.5vw, 15em"}))),(0,r.createElement)("div",{className:"preview__content"},null!==a&&(0,r.createElement)("p",{className:"preview__kicker"},(0,r.createElement)("a",{rel:"category",href:a.link},(0,r.createElement)("strong",null,(0,r.createElement)(m,{text:a.name})))),(0,r.createElement)("h3",{className:"preview__title"},(0,r.createElement)("a",{rel:"bookmark",href:t.link},(0,r.createElement)(m,{text:t.title.rendered}))),null!==i&&(0,r.createElement)(b,{author:i})))}function x(e){let{post:t}=e;const n=w(t),l=f(n,.8,[2560,1920,1280,960,640,480,320]),a=h(t),i=k(t);return(0,r.createElement)("article",{className:"preview is-layout-trending"},null!==n&&(0,r.createElement)("figure",{className:"preview__image-container"},(0,r.createElement)("a",{rel:"bookmark",href:t.link},(0,r.createElement)(p,{data:n,dimensions:l,sizes:"(max-width: 20em) 92.5vw, 20em"}))),(0,r.createElement)("div",{className:"preview__content"},null!==a&&(0,r.createElement)("p",{className:"preview__kicker"},(0,r.createElement)("a",{rel:"category",href:a.link},(0,r.createElement)(m,{text:a.name}))),(0,r.createElement)("h3",{className:"preview__title"},(0,r.createElement)("a",{rel:"bookmark",href:t.link},(0,r.createElement)(m,{text:t.title.rendered}))),null!==i&&(0,r.createElement)(b,{author:i})))}function P(){return 0}function z(e,t){return Math.sign(Date.parse(t.date_gmt)-Date.parse(e.date_gmt))}function C(e){return"published:newest"===e?z:P}function R(e){let{posts:t,sorting:n}=e;if(2>=t.length)return null;const l=t.slice();return""!==n&&l.sort(C(n)),(0,r.createElement)("div",{className:"wp-block-cata-rest__layout is-layout-trending"},(0,r.createElement)("div",null,(0,r.createElement)(N,{post:l[0]})),(0,r.createElement)("div",null,(0,r.createElement)(x,{post:l[1]})),(0,r.createElement)("div",null,(0,r.createElement)("div",{className:"wp-block-cata-rest__list line-height-2"},l.slice(2,8).map((e=>(0,r.createElement)(u,{key:e.id,post:e}))))))}function A(e){let{post:t}=e;const n=w(t),l=f(n);return(0,r.createElement)("article",{className:"preview is-layout-network"},(0,r.createElement)("div",{className:"preview__layout"},(0,r.createElement)("div",{className:"preview__start"},null!==n&&(0,r.createElement)("figure",{className:"preview__image-container"},(0,r.createElement)("a",{rel:"bookmark",href:t.link},(0,r.createElement)(p,{data:n,dimensions:l,sizes:"(max-width: 40em) 92.5vw, 36em"})))),(0,r.createElement)("div",{className:"preview__end"},(0,r.createElement)("h3",{className:"preview__title"},(0,r.createElement)("a",{rel:"bookmark",className:"preview__permalink",href:t.link},(0,r.createElement)(m,{text:t.title.rendered}))),(0,r.createElement)("div",{className:"preview__excerpt"},(0,r.createElement)(r.RawHTML,null,t.excerpt.rendered)),(0,r.createElement)("p",{className:"preview__domain"},new URL(t.link).hostname))))}function O(e){let{posts:t,sorting:n}=e;if(0===t.length)return null;const l=t.slice();return""!==n&&l.sort(C(n)),(0,r.createElement)("div",{className:"wp-block-cata-rest__layout is-layout-network"},l.map((e=>(0,r.createElement)(A,{key:e.id,post:e}))))}function L(e){let{post:t}=e;const n=w(t),l=f(n);return(0,r.createElement)("article",{className:"preview is-layout-compact"},(0,r.createElement)("div",{className:"preview__layout"},(0,r.createElement)("div",{className:"preview__start"},null!==n&&(0,r.createElement)("figure",{className:"preview__image-container"},(0,r.createElement)("a",{rel:"bookmark",href:t.link},(0,r.createElement)(p,{data:n,dimensions:l,sizes:"(max-width: 20em) 46.25vw, 13em"})))),(0,r.createElement)("div",{className:"preview__end"},(0,r.createElement)("h3",{className:"preview__title"},(0,r.createElement)("a",{rel:"bookmark",className:"preview__permalink",href:t.link},(0,r.createElement)(m,{text:t.title.rendered}))))))}function S(e){let{posts:t,sorting:n}=e;if(0===t.length)return null;const l=t.slice();return""!==n&&l.sort(C(n)),(0,r.createElement)("div",{className:"wp-block-cata-rest__layout is-layout-compact"},l.map((e=>(0,r.createElement)(L,{key:e.id,post:e}))))}function T(e){let{post:t,display_zodiac_links:n}=e;const l=w(t),a=f(l);return(0,r.createElement)("article",{className:"preview is-layout-daily-horoscope"},(0,r.createElement)("div",{className:"preview__layout"},(0,r.createElement)("div",{className:"preview__start"},null!==l&&(0,r.createElement)("figure",{className:"preview__image-container"},(0,r.createElement)("a",{rel:"bookmark",href:t.link},(0,r.createElement)(p,{data:l,dimensions:a,sizes:"(max-width: 40em) 92.5vw, 36em"})))),(0,r.createElement)("div",{className:"preview__end"},(0,r.createElement)("p",null,"Daily Horoscope"),(0,r.createElement)("h3",{className:"preview__title"},(0,r.createElement)("a",{rel:"bookmark",className:"preview__permalink",href:t.link},(0,r.createElement)(m,{text:t.title.rendered}))),(0,r.createElement)("div",{className:"preview__excerpt"},(0,r.createElement)(r.RawHTML,null,t.excerpt.rendered)),!1!==n&&(0,r.createElement)("div",{className:"preview__zodiac-signs"},(0,r.createElement)("a",null,"Aries"),(0,r.createElement)("a",null,"Taurus"),(0,r.createElement)("a",null,"Gemini"),(0,r.createElement)("a",null,"Cancer"),(0,r.createElement)("a",null,"Leo"),(0,r.createElement)("a",null,"Virgo"),(0,r.createElement)("a",null,"Libra"),(0,r.createElement)("a",null,"Scorpio"),(0,r.createElement)("a",null,"Sagittarius"),(0,r.createElement)("a",null,"Capricorn"),(0,r.createElement)("a",null,"Aquarius"),(0,r.createElement)("a",null,"Pisces")))))}function j(e){let{posts:t,sorting:n,display_zodiac_links:l}=e;if(0===t.length)return null;const a=t.slice();return""!==n&&a.sort(C(n)),(0,r.createElement)("div",{className:"wp-block-cata-rest__layout is-layout-daily-horoscope"},a.map((e=>(0,r.createElement)(T,{key:e.id,post:e,display_zodiac_links:l}))))}(0,l.registerBlockType)("cata/rest",{edit:function(e){let{attributes:t,setAttributes:n,clientId:l}=e;const{urls:o,content:m,layout:u,sorting:d,display_zodiac_links:p}=t,[E,_]=(0,r.useState)(""),[f,w]=(0,r.useState)([]);function v(e){return s()({path:e,cata:{useCache:!0,useProxy:!0},signal:(new AbortController).signal})}function h(e){console.error(e)}return(0,r.useEffect)((function(){Promise.all(o.map(v)).then((e=>{w(e.flat())})).catch(h)}),[o]),(0,r.useEffect)((function(){let e=O;switch(u){case"trending":e=R;break;case"compact":e=S;break;case"daily-horoscope":e=j}n({...t,content:(0,r.createElement)(e,{posts:f,sorting:d,display_zodiac_links:p})})}),[f,u,d,p]),(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",(0,i.useBlockProps)(),m),(0,r.createElement)(i.InspectorControls,null,(0,r.createElement)(c.PanelBody,{title:"WP REST API URLs",initialOpen:!1},(0,r.createElement)(c.PanelRow,null,(0,r.createElement)("div",null,o.map(((e,t)=>(0,r.createElement)("div",{key:`${l}-cata-rest-url-${t}`},(0,r.createElement)(c.Button,{text:"x",label:"Remove",variant:"tertiary",isDestructive:!0,onClick:()=>{n({urls:o.filter(((e,n)=>n!==t))})}}),e))))),(0,r.createElement)(c.PanelRow,null,(0,r.createElement)(c.TextControl,{label:(0,a.__)("WP REST API URL","cata"),type:"url",value:E,onChange:_})),(0,r.createElement)(c.PanelRow,null,(0,r.createElement)(c.Button,{variant:"primary",text:(0,a.__)("Add URL","cata"),onClick:()=>{n({urls:[...o,E]}),_("")}}))),(0,r.createElement)(c.PanelBody,{title:"REST Layout",initialOpen:!1},(0,r.createElement)(c.PanelRow,null,(0,r.createElement)(c.SelectControl,{label:"Layout",value:u,onChange:e=>{n({...t,layout:e})},options:[{label:"Default",value:""},{label:"Trending",value:"trending"},{label:"Network",value:"network"},{label:"Compact",value:"compact"},{label:"Daily Horoscope",value:"daily-horoscope"}]}))),(0,r.createElement)(c.PanelBody,{title:"REST Sorting",initialOpen:!1},(0,r.createElement)(c.PanelRow,null,(0,r.createElement)(c.SelectControl,{label:"Sorting",value:d,onChange:e=>{n({...t,sorting:e})},options:[{label:"Default",value:""},{label:"Newest First by Published Date",value:"published:newest"}]}))),"daily-horoscope"===u&&(0,r.createElement)(c.PanelBody,{title:"Zodiac Links"},(0,r.createElement)(c.PanelRow,null,(0,r.createElement)(c.ToggleControl,{label:"Display zodiac links",help:t.display_zodiac_links?"Zodiac links shown.":"Zodiac links hidden.",checked:t.display_zodiac_links,onChange:e=>{n({display_zodiac_links:e})}})))))},save:function(e){let{attributes:{content:t}}=e;return(0,r.createElement)("div",i.useBlockProps.save(),(0,r.createElement)(r.RawHTML,null,"string"==typeof t?t:l.children.toHTML([t])))}})}},n={};function l(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,l),a.exports}l.m=t,e=[],l.O=function(t,n,r,a){if(!n){var i=1/0;for(m=0;m<e.length;m++){n=e[m][0],r=e[m][1],a=e[m][2];for(var c=!0,o=0;o<n.length;o++)(!1&a||i>=a)&&Object.keys(l.O).every((function(e){return l.O[e](n[o])}))?n.splice(o--,1):(c=!1,a<i&&(i=a));if(c){e.splice(m--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var m=e.length;m>0&&e[m-1][2]>a;m--)e[m]=e[m-1];e[m]=[n,r,a]},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};l.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,i=n[0],c=n[1],o=n[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(r in c)l.o(c,r)&&(l.m[r]=c[r]);if(o)var m=o(l)}for(t&&t(n);s<i.length;s++)a=i[s],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(m)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var r=l.O(void 0,[431],(function(){return l(315)}));r=l.O(r)}();