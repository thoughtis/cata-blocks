(()=>{"use strict";var e,t={179:(e,t,a)=>{const r=window.wp.blocks,o=window.React,l=window.wp.blockEditor,n=window.wp.element,c=window.wp.components,i=window.wp.data,s=window.wp.apiFetch;var p=a.n(s);const u=window.wp.compose;function d({value:e,onDebouncedChange:t,timeout:a,...r}){const[l,i]=(0,n.useState)(e),[s,p]=(0,n.useState)(e),d=(0,u.useDebounce)(p,a);return(0,n.useEffect)((()=>{s!==l&&d(l)}),[s,l]),(0,n.useEffect)((()=>{t(s)}),[s]),(0,o.createElement)(c.TextControl,{value:l,onChange:i,...r})}function m({image:e}){return(0,o.createElement)("figure",{className:"wp-block-cata-shopify-product__image"},(0,o.createElement)("img",{loading:"lazy",src:e.url,alt:e.altText,sizes:"(max-width: 576px) 92.5vw, 576px",srcSet:e.url+"?resize=384,384 384w, "+e.url+"?resize=768,768 768w, "+e.url+"?resize=1152,1152 1152w",width:"384",height:"384"}))}function f({price:e}){const t=parseFloat(e.maxVariantPrice.amount).toFixed(2),a=parseFloat(e.minVariantPrice.amount).toFixed(2);return e=t!==a?"$"+a+" - $"+t:"$"+a,(0,o.createElement)("div",{className:"wp-block-cata-shopify-product__price"},(0,o.createElement)("span",null,e))}function h({product:e,display_price:t}){return(0,o.createElement)("article",{className:"wp-block-cata-shopify-product"},(0,o.createElement)("div",{className:"wp-block-cata-shopify-product__layout"},(0,o.createElement)("div",{className:"wp-block-cata-shopify-product__start"},e.featuredImage&&(0,o.createElement)(m,{image:e.featuredImage})),(0,o.createElement)("div",{className:"wp-block-cata-shopify-product__end"},(0,o.createElement)("h3",{className:"wp-block-cata-shopify-product__title"},(0,o.createElement)("a",{className:"wp-block-cata-shopify-product__link",href:e.onlineStoreUrl},e.title)),t&&(0,o.createElement)(f,{price:e.priceRange}))))}function w({products:e,display_price:t}){return 0===e.length?(0,o.createElement)("p",null,"No products, update the options to try again."):(0,o.createElement)("div",{className:"wp-block-cata-shopify__layout"},e.map(((e,a)=>(0,o.createElement)(h,{key:`cata-blocks-shopify-product-${a}`,product:e,display_price:t}))))}(0,r.registerBlockType)("cata/shopify",{edit:function({attributes:e,setAttributes:t}){const{store:a,count:r,tags:s}=e,u=(0,i.useSelect)((e=>e("cata/blocks").getShopifyData()),[]),[m,f]=(0,n.useState)([]);function h(e){f([]),console.error(e)}return(0,n.useEffect)((function(){""!==a?p()({path:"/cata/v1/shopify-proxy",method:"POST",data:{...e}}).then((e=>{f(e.flat())})).catch(h):f([])}),[a,r,s]),(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{...(0,l.useBlockProps)()},(0,o.createElement)(w,{products:m,display_price:e.display_price})),(0,o.createElement)(l.InspectorControls,null,(0,o.createElement)(c.PanelBody,{title:"Store",initialOpen:!1},(0,o.createElement)(c.PanelRow,null,(0,o.createElement)(c.SelectControl,{label:"Store",value:a,onChange:a=>{t({...e,store:a})}},(0,o.createElement)("option",{value:""},"Select a store..."),u.map((e=>(0,o.createElement)("option",{value:e},e)))))),(0,o.createElement)(c.PanelBody,{title:"Product Selection",initialOpen:!1},(0,o.createElement)(d,{label:"Product Tag Names",onDebouncedChange:e=>t({tags:e}),timeout:300,type:"text",value:s,help:"Enter multiple tag names in a comma separated list."}),(0,o.createElement)(c.TextControl,{label:"Number of Products",onChange:e=>t({count:e}),type:"number",value:r})),(0,o.createElement)(c.PanelBody,{title:"Product Block Options",initialOpen:!1},(0,o.createElement)(c.ToggleControl,{label:"Display product price",help:e.display_price?"Product price shown.":"No product price.",checked:e.display_price,onChange:e=>{t({display_price:e})}}))))},save:function(){return(0,o.createElement)("div",{...l.useBlockProps.save()})}}),(0,r.registerBlockStyle)("cata/shopify",{name:"reel",label:"Reel"}),(0,r.registerBlockStyle)("cata/shopify",{name:"list",label:"List"})}},a={};function r(e){var o=a[e];if(void 0!==o)return o.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,a,o,l)=>{if(!a){var n=1/0;for(p=0;p<e.length;p++){for(var[a,o,l]=e[p],c=!0,i=0;i<a.length;i++)(!1&l||n>=l)&&Object.keys(r.O).every((e=>r.O[e](a[i])))?a.splice(i--,1):(c=!1,l<n&&(n=l));if(c){e.splice(p--,1);var s=o();void 0!==s&&(t=s)}}return t}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[a,o,l]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var o,l,[n,c,i]=a,s=0;if(n.some((t=>0!==e[t]))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(i)var p=i(r)}for(t&&t(a);s<n.length;s++)l=n[s],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(p)},a=globalThis.webpackChunk=globalThis.webpackChunk||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=r.O(void 0,[431],(()=>r(179)));o=r.O(o)})();