!function(){"use strict";var e,t={270:function(e,t,n){var r=window.wp.blocks,a=window.wp.element,o=window.wp.blockEditor,c=window.wp.components,l=window.wp.data,i=window.wp.apiFetch,u=n.n(i);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}var s=window.wp.compose;function d(e){let{value:t,onDebouncedChange:n,timeout:r,...o}=e;const[l,i]=(0,a.useState)(t),[u,d]=(0,a.useState)(t),f=(0,s.useDebounce)(d,r);return(0,a.useEffect)((()=>{u!==l&&f(l)}),[u,l]),(0,a.useEffect)((()=>{n(u)}),[u]),(0,a.createElement)(c.TextControl,p({value:l,onChange:i},o))}function f(e){let{image:t}=e;return(0,a.createElement)("figure",{className:"wp-block-cata-shopify-product__image"},(0,a.createElement)("img",{loading:"lazy",src:t.url,alt:t.altText,sizes:"(max-width: 576px) 92.5vw, 576px",srcSet:t.url+"?resize=384,384 384w, "+t.url+"?resize=768,768 768w, "+t.url+"?resize=1152,1152 1152w",width:"384",height:"384"}))}function m(e){let{price:t}=e;const n=parseFloat(t.maxVariantPrice.amount).toFixed(2),r=parseFloat(t.minVariantPrice.amount).toFixed(2);return t=n!==r?"$"+r+" - $"+n:"$"+r,(0,a.createElement)("div",{className:"wp-block-cata-shopify-product__price"},(0,a.createElement)("span",null,t))}function h(e){let{product:t,display_price:n}=e;return(0,a.createElement)("article",{className:"wp-block-cata-shopify-product"},(0,a.createElement)("div",{className:"wp-block-cata-shopify-product__layout"},t.featuredImage&&(0,a.createElement)(f,{image:t.featuredImage}),(0,a.createElement)("h3",{className:"wp-block-cata-shopify-product__title"},(0,a.createElement)("a",{className:"wp-block-cata-shopify-product__link",href:t.onlineStoreUrl},t.title)),n&&(0,a.createElement)(m,{price:t.priceRange})))}function y(e){let{products:t,display_price:n}=e;return 0===t.length?(0,a.createElement)("p",null,"No products, update the options to try again."):(0,a.createElement)("div",{className:"wp-block-cata-shopify__layout"},t.map(((e,t)=>(0,a.createElement)(h,{key:`cata-blocks-shopify-product-${t}`,product:e,display_price:n}))))}(0,r.registerBlockType)("cata/shopify",{edit:function(e){let{attributes:t,setAttributes:n}=e;const{store:r,count:i,tags:p}=t,s=(0,l.useSelect)((e=>e("cata/blocks").getShopifyData()),[]),[f,m]=(0,a.useState)([]);function h(e){m([]),console.error(e)}return(0,a.useEffect)((function(){""!==r?u()({path:"/cata/v1/shopify-proxy",method:"POST",data:{...t}}).then((e=>{m(e.flat())})).catch(h):m([])}),[r,i,p]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",(0,o.useBlockProps)(),(0,a.createElement)(y,{products:f,display_price:t.display_price})),(0,a.createElement)(o.InspectorControls,null,(0,a.createElement)(c.PanelBody,{title:"Store",initialOpen:!1},(0,a.createElement)(c.PanelRow,null,(0,a.createElement)(c.SelectControl,{label:"Store",value:r,onChange:e=>{n({...t,store:e})}},(0,a.createElement)("option",{value:""},"Select a store..."),s.map((e=>(0,a.createElement)("option",{value:e},e)))))),(0,a.createElement)(c.PanelBody,{title:"Product Selection",initialOpen:!1},(0,a.createElement)(d,{label:"Product Tag Names",onDebouncedChange:e=>n({tags:e}),timeout:300,type:"text",value:p,help:"Enter multiple tag names in a comma separated list."}),(0,a.createElement)(c.TextControl,{label:"Number of Products",onChange:e=>n({count:e}),type:"number",value:i})),(0,a.createElement)(c.PanelBody,{title:"Product Block Options",initialOpen:!1},(0,a.createElement)(c.ToggleControl,{label:"Display product price",help:t.display_price?"Product price shown.":"No product price.",checked:t.display_price,onChange:e=>{n({display_price:e})}}))))},save:function(){return(0,a.createElement)("div",o.useBlockProps.save())}}),(0,r.registerBlockStyle)("cata/shopify",{name:"reel",label:"Reel"})}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=function(t,n,a,o){if(!n){var c=1/0;for(p=0;p<e.length;p++){n=e[p][0],a=e[p][1],o=e[p][2];for(var l=!0,i=0;i<n.length;i++)(!1&o||c>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[i])}))?n.splice(i--,1):(l=!1,o<c&&(c=o));if(l){e.splice(p--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[n,a,o]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,c=n[0],l=n[1],i=n[2],u=0;if(c.some((function(t){return 0!==e[t]}))){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(i)var p=i(r)}for(t&&t(n);u<c.length;u++)o=c[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(p)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=r.O(void 0,[431],(function(){return r(270)}));a=r.O(a)}();