!function(){"use strict";var e,t={770:function(e,t,r){var n=window.wp.blocks,a=window.wp.element,l=window.wp.i18n,o=window.wp.blockEditor,c=window.wp.components,s=window.wp.apiFetch,u=r.n(s),i=(window.wp.url,window.wp.primitives),p=(0,a.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(i.Path,{d:"M4 9v1.5h16V9H4zm12 5.5h4V13h-4v1.5zm-6 0h4V13h-4v1.5zm-6 0h4V13H4v1.5z"}));window.wp.hooks,(0,n.registerBlockType)("cata/shop",{edit:function(e){const t={...(0,o.useBlockProps)()},{attributes:r,setAttributes:n}=e,s=r.shopCatalogApiUrlBase+"?category="+r.category+"&per_page="+r.per_page+"&orderby="+r.orderby+"&order="+r.order,i=(0,a.useRef)(!0),m=(0,a.useRef)(),[d,g]=(0,a.useState)(null),h=new AbortController;return(0,a.createElement)("div",t,(0,a.createElement)("p",null,(0,l.__)("WP REST API URL:","cata")),(0,a.createElement)("p",null,s),!d&&(0,a.createElement)("p",null,(0,l.__)("Shop Catalog Merch will go here!","cata")),d&&(0,a.createElement)("div",{className:"wp-block-cata-products alignwide"},(0,a.createElement)("div",{className:"wp-block-cata-products__layout"},d.map((e=>(0,a.createElement)("article",{className:"wp-block-cata-product"},(0,a.createElement)("div",{className:"wp-block-cata-product__layout tappable-card"},(0,a.createElement)("figure",{className:"wp-block-cata-product__image"},(0,a.createElement)("img",{loading:"lazy",src:e.images[0].src,alt:e.images[0].alt,sizes:"(max-width: 576px) 92.5vw, 576px",srcset:e.images[0].src+"?resize=384,384 384w, "+e.images[0].src+"?resize=768,768 768w, "+e.images[0].src+"?resize=1152,1152 1152w",width:"384",height:"384"})),(0,a.createElement)("h3",{className:"wp-block-cata-product__title"},(0,a.createElement)("a",{className:"wp-block-cata-product__link tappable-card-anchor",href:e.permalink},e.name)),(0,a.createElement)("div",{className:"wp-block-cata-product__byline"},e.cap_guest_authors.length>0&&"by "+e.cap_guest_authors.reduce(((e,t,r,n)=>{const a=n.length-1===r?"":", ";return e+t.display_name+a}),""),!e.cap_guest_authors.length>0&&e.brands.length>0&&"from "+e.brands.reduce(((e,t,r,n)=>{const a=n.length-1===r?"":", ";return e+t.name+a}),"")),(0,a.createElement)("div",{className:"wp-block-cata-product__price"},e.on_sale&&(0,a.createElement)("del",null,(0,a.createElement)("span",null,(0,a.createElement)("span",null,"$"),e.regular_price))&&(0,a.createElement)("ins",null,(0,a.createElement)("span",null,(0,a.createElement)("span",null,"$"),e.sale_price)),e.price!==e.regular_price&&(0,a.createElement)("span",null,(0,a.createElement)("span",null,"$"),e.price)+" - "+(0,a.createElement)("span",null,(0,a.createElement)("span",null,"$"),e.regular_price),e.price===e.regular_price&&!e.on_sale&&(0,a.createElement)("span",null,(0,a.createElement)("span",null,"$"),e.regular_price)))))))),(0,a.createElement)(c.Button,{onClick:()=>{(()=>{if(!i.current)return;u().use(((e,t)=>(console.log("middleware callback func - options:"),console.log(e),t(e))));const e=(m.current=u()({url:"/wp-json/cata/v1/proxy/?url="+encodeURIComponent(s),signal:h.signal})).then((t=>{console.log("isMountedRef.current"),console.log(i.current),console.log("fetchRequest"),console.log(e),console.log("fetchRequestRef.current.value"),console.log(m.current.value),console.log("fetchResponse"),console.log(t),i.current&&t&&g(t)})).catch((e=>{i.current&&g({error:!0,errorMsg:e.message})})).finally((()=>{i.current}))})()}},"FETCH"),(0,a.createElement)(c.Button,{onClick:()=>{h.abort()}},"ABORT"),(0,a.createElement)(o.InspectorControls,null,(0,a.createElement)(c.PanelBody,{title:"Product API URL",icon:p,initialOpen:!1},(0,a.createElement)(c.TextControl,{label:"SC API Product Category",onChange:e=>n({category:e}),type:"text",value:r.category,help:"Shop Catalog API Product Category. Creepy Products: 1752"}),(0,a.createElement)(c.TextControl,{label:"SC API Product Quantity",onChange:e=>n({per_page:e}),type:"text",value:r.per_page,help:"Quantity of Shop Catalog products to be returned from the API."}))))},save:function(){return(0,a.createElement)("p",o.useBlockProps.save(),(0,l.__)("Shop â€“ hello from the saved content!","cata"))}})}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=function(t,r,a,l){if(!r){var o=1/0;for(i=0;i<e.length;i++){r=e[i][0],a=e[i][1],l=e[i][2];for(var c=!0,s=0;s<r.length;s++)(!1&l||o>=l)&&Object.keys(n.O).every((function(e){return n.O[e](r[s])}))?r.splice(s--,1):(c=!1,l<o&&(o=l));if(c){e.splice(i--,1);var u=a();void 0!==u&&(t=u)}}return t}l=l||0;for(var i=e.length;i>0&&e[i-1][2]>l;i--)e[i]=e[i-1];e[i]=[r,a,l]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,l,o=r[0],c=r[1],s=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(a in c)n.o(c,a)&&(n.m[a]=c[a]);if(s)var i=s(n)}for(t&&t(r);u<o.length;u++)l=o[u],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(i)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var a=n.O(void 0,[431],(function(){return n(770)}));a=n.O(a)}();