!function(){var e,t={770:function(e,t,r){"use strict";var a=window.wp.blocks,l=window.wp.element,n=window.wp.i18n,c=window.wp.blockEditor,o=window.wp.components,s=window.wp.apiFetch,p=r.n(s),i=(window.wp.url,window.wp.primitives),u=(0,l.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)(i.Path,{d:"M4 9v1.5h16V9H4zm12 5.5h4V13h-4v1.5zm-6 0h4V13h-4v1.5zm-6 0h4V13H4v1.5z"}));window.wp.hooks;var m=r(779),d=r.n(m);(0,a.registerBlockType)("cata/shop",{edit:function(e){const t={...(0,c.useBlockProps)()},{attributes:r,setAttributes:a}=e,s=r.shopCatalogApiUrlBase+"?category="+r.category+"&per_page="+r.per_page+"&orderby="+r.orderby+"&order="+r.order,i=(0,l.useRef)(!0),m=(0,l.useRef)(),[d,g]=(0,l.useState)(null),_=new AbortController;return(0,l.createElement)("div",t,!d&&(0,l.createElement)("p",null,(0,n.__)("Shop Catalog Merch will go here!","cata")),d&&(0,l.createElement)("div",{className:"wp-block-cata-products alignwide"},(0,l.createElement)("div",{className:"wp-block-cata-products__layout"},d.map((e=>(0,l.createElement)("article",{className:"wp-block-cata-product"},(0,l.createElement)("div",{className:"wp-block-cata-product__layout tappable-card"},(0,l.createElement)("figure",{className:"wp-block-cata-product__image"},(0,l.createElement)("img",{loading:"lazy",src:e.images[0].src,alt:e.images[0].alt,sizes:"(max-width: 576px) 92.5vw, 576px",srcset:e.images[0].src+"?resize=384,384 384w, "+e.images[0].src+"?resize=768,768 768w, "+e.images[0].src+"?resize=1152,1152 1152w",width:"384",height:"384"})),(0,l.createElement)("h3",{className:"wp-block-cata-product__title"},(0,l.createElement)("a",{className:"wp-block-cata-product__link tappable-card-anchor",href:e.permalink},e.name)),(0,l.createElement)("div",{className:"wp-block-cata-product__byline"},e.cap_guest_authors.length>0&&"by "+e.cap_guest_authors.reduce(((e,t,r,a)=>{const l=a.length-1===r?"":", ";return e+t.display_name+l}),""),!e.cap_guest_authors.length>0&&e.brands.length>0&&"from "+e.brands.reduce(((e,t,r,a)=>{const l=a.length-1===r?"":", ";return e+t.name+l}),"")),(0,l.createElement)("div",{className:"wp-block-cata-product__price"},e.on_sale&&e.regular_price&&e.sale_price((0,l.createElement)("del",null,(0,l.createElement)("span",null,(0,l.createElement)("span",null,"$"),e.regular_price))&&(0,l.createElement)("ins",null,(0,l.createElement)("span",null,(0,l.createElement)("span",null,"$"),e.sale_price))),e.price&&e.regular_price&&!e.on_sale&&e.price!==e.regular_price&&(0,l.createElement)("span",null,(0,l.createElement)("span",null,"$"),e.price)+" - "+(0,l.createElement)("span",null,(0,l.createElement)("span",null,"$"),e.regular_price),e.price&&e.regular_price&&!e.on_sale&&e.price===e.regular_price&&(0,l.createElement)("span",null,(0,l.createElement)("span",null,"$"),e.regular_price)))))))),(0,l.createElement)(c.InspectorControls,null,(0,l.createElement)(o.PanelBody,{title:"Product API URL",icon:u,initialOpen:!1},(0,l.createElement)(o.TextControl,{label:"SC API Product Category",onChange:e=>a({category:e}),type:"text",value:r.category,help:"Shop Catalog API Product Category. Creepy Products: 1752"}),(0,l.createElement)(o.TextControl,{label:"SC API Product Quantity",onChange:e=>a({per_page:e}),type:"text",value:r.per_page,help:"Quantity of Shop Catalog products to be returned from the API."}),(0,l.createElement)(o.Button,{onClick:()=>{i.current&&(p().use(((e,t)=>t(e))),(m.current=p()({url:"/wp-json/cata/v1/proxy/?url="+encodeURIComponent(s),signal:_.signal})).then((e=>{i.current&&e&&(g(e),a({results:e}))})).catch((e=>{i.current&&g({error:!0,errorMsg:e.message})})).finally((()=>{i.current})))}},"FETCH"),(0,l.createElement)(o.Button,{onClick:()=>{_.abort()}},"ABORT"))))},save:function(e){let{attributes:t}=e;const{results:r}=t,a=c.useBlockProps.save({className:d()("wp-block-cata-products","alignwide")});return console.log("save.js- save() - results"),console.log(r),console.table(r,["name","id","price","regular_price","on_sale","sale_price"]),(0,l.createElement)("div",a,r&&(0,l.createElement)("div",{className:"wp-block-cata-products__layout"},r.map((e=>(0,l.createElement)("article",{className:"wp-block-cata-product"},(0,l.createElement)("div",{className:"wp-block-cata-product__layout tappable-card"},(0,l.createElement)("figure",{className:"wp-block-cata-product__image"},(0,l.createElement)("img",{loading:"lazy",src:e.images[0].src,alt:e.images[0].alt,sizes:"(max-width: 576px) 92.5vw, 576px",srcset:e.images[0].src+"?resize=384,384 384w, "+e.images[0].src+"?resize=768,768 768w, "+e.images[0].src+"?resize=1152,1152 1152w",width:"384",height:"384"})),(0,l.createElement)("h3",{className:"wp-block-cata-product__title"},(0,l.createElement)("a",{className:"wp-block-cata-product__link tappable-card-anchor",href:e.permalink},e.name)),(0,l.createElement)("div",{className:"wp-block-cata-product__byline"},e.cap_guest_authors.length>0&&"by "+e.cap_guest_authors.reduce(((e,t,r,a)=>{const l=a.length-1===r?"":", ";return e+t.display_name+l}),""),!e.cap_guest_authors.length>0&&e.brands.length>0&&"from "+e.brands.reduce(((e,t,r,a)=>{const l=a.length-1===r?"":", ";return e+t.name+l}),"")),(0,l.createElement)("div",{className:"wp-block-cata-product__price"},e.on_sale&&e.regular_price&&e.sale_price((0,l.createElement)("del",null,(0,l.createElement)("span",null,(0,l.createElement)("span",null,"$"),e.regular_price))&&(0,l.createElement)("ins",null,(0,l.createElement)("span",null,(0,l.createElement)("span",null,"$"),e.sale_price))),e.price&&e.regular_price&&!e.on_sale&&e.price!==e.regular_price&&(0,l.createElement)("span",null,(0,l.createElement)("span",null,"$"),e.price)+" - "+(0,l.createElement)("span",null,(0,l.createElement)("span",null,"$"),e.regular_price),e.price&&e.regular_price&&!e.on_sale&&e.price===e.regular_price&&(0,l.createElement)("span",null,(0,l.createElement)("span",null,"$"),e.regular_price))))))))}})},779:function(e,t){var r;!function(){"use strict";var a={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)){if(r.length){var c=l.apply(null,r);c&&e.push(c)}}else if("object"===n)if(r.toString===Object.prototype.toString)for(var o in r)a.call(r,o)&&r[o]&&e.push(o);else e.push(r.toString())}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):void 0===(r=function(){return l}.apply(t,[]))||(e.exports=r)}()}},r={};function a(e){var l=r[e];if(void 0!==l)return l.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,e=[],a.O=function(t,r,l,n){if(!r){var c=1/0;for(i=0;i<e.length;i++){r=e[i][0],l=e[i][1],n=e[i][2];for(var o=!0,s=0;s<r.length;s++)(!1&n||c>=n)&&Object.keys(a.O).every((function(e){return a.O[e](r[s])}))?r.splice(s--,1):(o=!1,n<c&&(c=n));if(o){e.splice(i--,1);var p=l();void 0!==p&&(t=p)}}return t}n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[r,l,n]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var l,n,c=r[0],o=r[1],s=r[2],p=0;if(c.some((function(t){return 0!==e[t]}))){for(l in o)a.o(o,l)&&(a.m[l]=o[l]);if(s)var i=s(a)}for(t&&t(r);p<c.length;p++)n=c[p],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(i)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var l=a.O(void 0,[431],(function(){return a(770)}));l=a.O(l)}();